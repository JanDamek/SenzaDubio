CREATE TABLE gallery (id BIGINT AUTO_INCREMENT, title VARCHAR(100) NOT NULL, description LONGTEXT, is_active TINYINT(1) DEFAULT '1' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX gallery_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE gallery_image (id BIGINT AUTO_INCREMENT, gallery_id bigint(20) NOT NULL, is_active TINYINT(1) DEFAULT '1' NOT NULL, path VARCHAR(255) NOT NULL, path2 VARCHAR(255) NOT NULL, alt VARCHAR(60) NOT NULL, title VARCHAR(100), ord BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX gallery_id_idx (gallery_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE kategorie (id BIGINT AUTO_INCREMENT, name VARCHAR(50) NOT NULL UNIQUE, popis LONGTEXT, poradi BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX kategorie_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE klienti_translation (id BIGINT, title VARCHAR(100), popis LONGTEXT, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE klienti (id BIGINT AUTO_INCREMENT, name VARCHAR(50), slug VARCHAR(50), publikovat TINYINT(1), img_gray VARCHAR(255), img_hover VARCHAR(255), url VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE odkazy_translation (id BIGINT, title VARCHAR(100), popis LONGTEXT, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE odkazy (id BIGINT AUTO_INCREMENT, name VARCHAR(50), slug VARCHAR(50), publikovat TINYINT(1), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE setting_translation (id BIGINT, homepage VARCHAR(15), sluzby VARCHAR(15), klienti VARCHAR(15), kontakt VARCHAR(15), animace VARCHAR(255), partneri VARCHAR(15), kon_form VARCHAR(30), zadej_pop VARCHAR(30), poptavka VARCHAR(50), odeslat VARCHAR(255), on_line_pop VARCHAR(255), mno_dal VARCHAR(50), email VARCHAR(50), tel VARCHAR(50), mobil VARCHAR(50), ulice VARCHAR(100), mesto VARCHAR(100), stat VARCHAR(100), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE setting (id BIGINT AUTO_INCREMENT, sitename VARCHAR(50), pracovni_doba LONGTEXT, web_adr VARCHAR(55), ga_code VARCHAR(100), google_overeni VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sluzby_translation (id BIGINT, title VARCHAR(255), popis LONGTEXT, lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sluzby (id BIGINT AUTO_INCREMENT, info_list VARCHAR(50), name VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE stranky_translation (id BIGINT, title VARCHAR(100), str_title VARCHAR(100), perex LONGTEXT, popis LONGTEXT, keywords VARCHAR(255), description VARCHAR(255), lang CHAR(2), PRIMARY KEY(id, lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE stranky (id BIGINT AUTO_INCREMENT, name VARCHAR(50), slug VARCHAR(50), publikovat TINYINT(1), gallery_cs_id BIGINT, gallery_de_id BIGINT, gallery_it_id BIGINT, gallery_en_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX gallery_cs_id_idx (gallery_cs_id), INDEX gallery_de_id_idx (gallery_de_id), INDEX gallery_it_id_idx (gallery_it_id), INDEX gallery_en_id_idx (gallery_en_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_czech_ci ENGINE = INNODB;
ALTER TABLE gallery_image ADD CONSTRAINT gallery_image_gallery_id_gallery_id FOREIGN KEY (gallery_id) REFERENCES gallery(id) ON DELETE CASCADE;
ALTER TABLE klienti_translation ADD CONSTRAINT klienti_translation_id_klienti_id FOREIGN KEY (id) REFERENCES klienti(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE odkazy_translation ADD CONSTRAINT odkazy_translation_id_odkazy_id FOREIGN KEY (id) REFERENCES odkazy(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE setting_translation ADD CONSTRAINT setting_translation_id_setting_id FOREIGN KEY (id) REFERENCES setting(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE sluzby_translation ADD CONSTRAINT sluzby_translation_id_sluzby_id FOREIGN KEY (id) REFERENCES sluzby(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE stranky_translation ADD CONSTRAINT stranky_translation_id_stranky_id FOREIGN KEY (id) REFERENCES stranky(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE stranky ADD CONSTRAINT stranky_gallery_it_id_gallery_id FOREIGN KEY (gallery_it_id) REFERENCES gallery(id);
ALTER TABLE stranky ADD CONSTRAINT stranky_gallery_en_id_gallery_id FOREIGN KEY (gallery_en_id) REFERENCES gallery(id);
ALTER TABLE stranky ADD CONSTRAINT stranky_gallery_de_id_gallery_id FOREIGN KEY (gallery_de_id) REFERENCES gallery(id);
ALTER TABLE stranky ADD CONSTRAINT stranky_gallery_cs_id_gallery_id FOREIGN KEY (gallery_cs_id) REFERENCES gallery(id);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
